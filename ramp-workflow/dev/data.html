

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Preparing your data &mdash; RAMP 0.3.0.dev0 documentation</title>
  

  
  
  
  

  
  <script type="text/javascript" src="_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
        <script type="text/javascript" src="_static/jquery.js"></script>
        <script type="text/javascript" src="_static/underscore.js"></script>
        <script type="text/javascript" src="_static/doctools.js"></script>
        <script type="text/javascript" src="_static/language_data.js"></script>
        <script type="text/javascript" src="_static/js/copybutton.js"></script>
    
    <script type="text/javascript" src="_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="_static/css/ramp.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="_static/basic.css" type="text/css" />
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="The problem.py file" href="problem.html" />
    <link rel="prev" title="Build your own RAMP challenge" href="workflow.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="index.html" class="icon icon-home"> RAMP
          

          
          </a>

          
            
            
              <div class="version">
                0.3.0.dev0
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">What can RAMP offer you?</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="who_are_you.html">Who are you</a></li>
</ul>
<p class="caption"><span class="caption-text">Using RAMP workflow</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="workflow.html">Build your own RAMP challenge</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Preparing your data</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#ramp-data">RAMP-data</a></li>
<li class="toctree-l2"><a class="reference internal" href="#downloading-data">Downloading data</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="problem.html">The problem.py file</a></li>
<li class="toctree-l1"><a class="reference internal" href="scoring.html">RAMP scoring</a></li>
<li class="toctree-l1"><a class="reference internal" href="command_line.html">RAMP workflow commands</a></li>
<li class="toctree-l1"><a class="reference internal" href="contribute.html">Contributing</a></li>
</ul>
<p class="caption"><span class="caption-text">Using RAMP kits</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="using_kits.html">Using RAMP starting-kits</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">RAMP</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html">Docs</a> &raquo;</li>
        
      <li>Preparing your data</li>
    
    

  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="preparing-your-data">
<span id="data"></span><h1>Preparing your data<a class="headerlink" href="#preparing-your-data" title="Permalink to this headline">¶</a></h1>
<p>The data for your RAMP challenge should consist of:</p>
<ul class="simple">
<li><p><strong>Private test data</strong> - this data is stored on the RAMP server and is used to
compute scores for each submission for the private leaderboard. It is
essential that this data remains private from participants.</p></li>
<li><p><strong>Private training data</strong> - this data is also stored on the RAMP server and will
be used by the server to train each submission. It is good practice that this
is completely independent of the public data. However, if you have a small
data size, it is also fine for this data to be the same as the public data.</p></li>
<li><p><strong>Public data</strong> - this data is made available to the participants. It needs to be
split into ‘public training data’ and ‘public testing’ subsets. This is
because the same script is used to test submissions when you run RAMP locally
and on the RAMP server, when you make a submission to a RAMP event. Therefore,
<code class="docutils literal notranslate"><span class="pre">get_train_data()</span></code> and <code class="docutils literal notranslate"><span class="pre">get_test_data()</span></code> (see <a class="reference internal" href="problem.html#in-out"><span class="std std-ref">Data I/O</span></a>)
needs to work
both locally and on the RAMP server. This is generally achieved by naming the
public test and train dataset the same as the private test and train dataset.
See <a class="reference internal" href="#prepare-ramp-data"><span class="std std-ref">RAMP-data</span></a> for an example.</p></li>
</ul>
<div class="section" id="ramp-data">
<span id="prepare-ramp-data"></span><h2>RAMP-data<a class="headerlink" href="#ramp-data" title="Permalink to this headline">¶</a></h2>
<p>By convention all the data files for a RAMP challenge are kept in a repository
in the <a class="reference external" href="https://github.com/ramp-data">ramp-data</a> organisation on GitHub. This
is always a private repository and all data, public and private, can be kept
here, if size permits.</p>
<p>A <code class="docutils literal notranslate"><span class="pre">prepare_data.py</span></code> script should also be stored here. This script should
perform any data cleaning steps on the original data and split the data into
the appropriate subsets as detailed above. It is a good way to document all
the data cleaning steps. As an example, the Titanic challenge, which has
a very basic <code class="docutils literal notranslate"><span class="pre">prepare_data.py</span></code> file, is shown below:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># In this case we have a predefined train/test cut so we are not splitting</span>
<span class="c1"># the data here</span>
<span class="n">df_train</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="s1">&#39;data&#39;</span><span class="p">,</span> <span class="s1">&#39;train.csv&#39;</span><span class="p">))</span>
<span class="n">df_test</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="s1">&#39;data&#39;</span><span class="p">,</span> <span class="s1">&#39;test.csv&#39;</span><span class="p">))</span>  <span class="c1"># noqa</span>

<span class="c1"># In this case the private training data was also used as the public data</span>
<span class="n">df_public</span> <span class="o">=</span> <span class="n">df_train</span>
<span class="n">df_public_train</span><span class="p">,</span> <span class="n">df_public_test</span> <span class="o">=</span> <span class="n">train_test_split</span><span class="p">(</span>
    <span class="n">df_public</span><span class="p">,</span> <span class="n">test_size</span><span class="o">=</span><span class="mf">0.2</span><span class="p">,</span> <span class="n">random_state</span><span class="o">=</span><span class="mi">57</span><span class="p">)</span>
    <span class="c1"># specify the random_state to ensure reproducibility</span>
<span class="n">df_public_train</span><span class="o">.</span><span class="n">to_csv</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="s1">&#39;data&#39;</span><span class="p">,</span> <span class="s1">&#39;public_train.csv&#39;</span><span class="p">),</span> <span class="n">index</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
<span class="n">df_public_test</span><span class="o">.</span><span class="n">to_csv</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="s1">&#39;data&#39;</span><span class="p">,</span> <span class="s1">&#39;public_test.csv&#39;</span><span class="p">),</span> <span class="n">index</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
</pre></div>
</div>
<p>Note that the private training data was also used as the public data, due to
the small size of this dataset. At this stage we have 4 files:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">train.csv</span></code> - private training data.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">test.csv</span></code> - private testing data. This should never be made public.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">public_train.csv</span></code> - in this case, this was a subset of the private
training data <code class="docutils literal notranslate"><span class="pre">train.csv</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">public_test.csv</span></code> - in this case, this was a subset of the private training
data <code class="docutils literal notranslate"><span class="pre">train.csv</span></code>.</p></li>
</ul>
<p>We now need to copy the public data files <code class="docutils literal notranslate"><span class="pre">public_train.csv</span></code> and
<code class="docutils literal notranslate"><span class="pre">public_test.csv</span></code> into the ‘ramp-kits’ directory. Note that the script
assumes the file directory structure:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>&lt;base_dir&gt;
├── &lt;ramp_kits_dir&gt;/
|   └── &lt;ramp_name&gt;/ # the starting kit would be in here
|       └── data/
└── &lt;ramp_data_dir&gt;/
    └── &lt;ramp_name&gt;/ # ramp data files and prepare_data.py file are here
        └── data/
</pre></div>
</div>
<p>The public files are being copied from the <code class="docutils literal notranslate"><span class="pre">ramp_data_dir/data</span></code> directory
into the <code class="docutils literal notranslate"><span class="pre">ramp_kits_dir/data</span></code> directory. They are also being renamed to
<code class="docutils literal notranslate"><span class="pre">train.csv</span></code> and <code class="docutils literal notranslate"><span class="pre">test.csv</span></code>, the same filenames as the private data in
<code class="docutils literal notranslate"><span class="pre">ramp_data_dir/data</span></code>. This is because, as mentioned above, the same script is
used to test submissions locally and on the RAMP server.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># copy starting kit files to &lt;ramp_kits_dir&gt;/&lt;ramp_name&gt;/data</span>
<span class="n">copyfile</span><span class="p">(</span>
    <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="s1">&#39;data&#39;</span><span class="p">,</span> <span class="s1">&#39;public_train.csv&#39;</span><span class="p">),</span>
    <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">ramp_kits_dir</span><span class="p">,</span> <span class="n">ramp_name</span><span class="p">,</span> <span class="s1">&#39;data&#39;</span><span class="p">,</span> <span class="s1">&#39;train.csv&#39;</span><span class="p">)</span>
<span class="p">)</span>
<span class="n">copyfile</span><span class="p">(</span>
    <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="s1">&#39;data&#39;</span><span class="p">,</span> <span class="s1">&#39;public_test.csv&#39;</span><span class="p">),</span>
    <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">ramp_kits_dir</span><span class="p">,</span> <span class="n">ramp_name</span><span class="p">,</span> <span class="s1">&#39;data&#39;</span><span class="p">,</span> <span class="s1">&#39;test.csv&#39;</span><span class="p">)</span>
<span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="downloading-data">
<span id="download-data"></span><h2>Downloading data<a class="headerlink" href="#downloading-data" title="Permalink to this headline">¶</a></h2>
<p>If your data is to be downloaded from elsewhere, you can download the data in
the <code class="docutils literal notranslate"><span class="pre">prepare_data.py</span></code> file then clean and create the required private and
public datasets.</p>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="problem.html" class="btn btn-neutral float-right" title="The problem.py file" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="workflow.html" class="btn btn-neutral float-left" title="Build your own RAMP challenge" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2015 - 2019, Paris-Saclay Center for Data Science

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>